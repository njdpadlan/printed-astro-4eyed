---
import Hero from "../components/PressureSeal/Hero.astro";
import SecureFold from "../components/PressureSeal/SecureFold.astro";

import WhatIs from "../components/PressureSeal/WhatIs.astro";

import Layout from "../layouts/Layout.astro";
import fetchApi from "../lib/strapi";



const pages = await fetchApi({
  endpoint: 'pressure-seal-envelopes', 
  page: 'PressureSealEnvelopePage',
  wrappedByKey: 'data',
});

// http://localhost:1337/api/pressure-seal-envelopes?populate[PressureSealEnvelopePage][populate]=*

//fetch page data for pressure seal envelope page
const pressureSealPage = pages[0];
const pageData = pressureSealPage?.PressureSealEnvelopePage || [];

// fetch pressureseal hero components
const heroData = pageData.find(pd => pd.__component === "pressuresealhero.pressureseal-hero") || {};
const {pressuresealHeader, pressuresealDesc} = heroData;


const { pressuresealImage: {
	url: pressuresealImage
}} = heroData;

//fetch pressuresealWhatIs components

const pressuresealWhatIsData = pageData.find(pd => pd.__component === "pressuresealwhatis.pressureseal-what-is") || {};
const {
    pressuresealWhatIsTitle, 
    pressuresealWhatIsDesc, 
    sealedbypressureText,
} = pressuresealWhatIsData;

const { pressuresealImage1: {
	url: pressuresealImage1
}} = pressuresealWhatIsData;

const { pressuresealImage2: {
	url: pressuresealImage2
}} = pressuresealWhatIsData;

const { pressuresealImage3: {
	url: pressuresealImage3
}} = pressuresealWhatIsData;


//fetch Secure Fold components
const securefoldData = pageData.find(pd => pd.__component === "securefold.secure-fold") || {};
const {
  idealforText, 
  payroll, 
  taxforms, 
  statements, 
  utilitybills, 
  directmail, 
  securefoldBtn, 
  securefoldTitle
} = securefoldData;

const { securefoldImage: {
	url: securefoldImage
}} = securefoldData;



---

<Layout>
    <Hero {pressuresealHeader} {pressuresealDesc} {pressuresealImage} />
    <WhatIs {pressuresealWhatIsTitle} {pressuresealWhatIsDesc} {sealedbypressureText} {pressuresealImage1} {pressuresealImage2} {pressuresealImage3} />
    <SecureFold {idealforText} {payroll} {taxforms} {statements} {utilitybills} {directmail} {securefoldBtn} {securefoldTitle} {securefoldImage}/>
</Layout>
